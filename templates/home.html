{% extends "layout.html" %}

{% block title %}Smart Books Colombia – Librería Online en Colombia{% endblock %}

{% block content %}

    <div id="content" class="site-content">
        <div class="row">
            <div id="primary" class="content-area column small-12">
                <main id="main" class="site-main" role="main">

                    <div class="wp-container-1 elementor-section elementor-top-section elementor-element elementor-element-c26685f elementor-section-height-min-height elementor-section-boxed elementor-section-height-default elementor-section-items-middle"
                        data-element_type="section">
                        <div class="elementor-container elementor-column-gap-default">
                            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-287c14a"
                                data-element_type="column">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-75ce869 elementor-widget elementor-widget-image-carousel"
                                        data-element_type="widget">
                                        
                                        <div class="banner-carousel-container">
                                            <div class="carousel-track banner-track">
                                                <div class="carousel-slide banner-slide"><img src="{{ url_banner1 }}" alt="Banner Promocional 1" class="banner-image"></div>
                                                <div class="carousel-slide banner-slide"><img src="{{ url_banner2 }}" alt="Banner Promocional 2" class="banner-image"></div>
                                            </div>
                                            <button class="carousel-btn prev-btn banner-prev-btn">&#10094;</button>
                                            <button class="carousel-btn next-btn banner-next-btn">&#10095;</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <section class="recommended-products-section wp-block-group elementor-section elementor-element-b7f3295 elementor-section-full_width elementor-section-height-default elementor-section-height-default" data-element_type="section">
                        <h2 class="section-title">Nuestras categorías destacadas</h2>
                        <p class="section-subtitle">Lo más buscado por nuestros clientes en este momento</p>

                        <div class="recommended-carousel-wrapper">
                            <button class="product-carousel-btn product-prev-btn">&#10094;</button>
                            <button class="product-carousel-btn product-next-btn">&#10095;</button>

                            <div class="recommended-carousel-track product-track">
                                
                                <div class="product-group">
                                    {% set products_group1 = [
                                        {'img': url_productosmasvendidos1, 'txt': txt_productosmasvendidos1, 'desc': 'PAQUETE DE INGLÉS COSMO. Ideal para grados superiores.'},
                                        {'img': url_productosmasvendidos2, 'txt': txt_productosmasvendidos2, 'desc': 'PAQUETE DE INGLÉS COSMO. Ideal para primeros grados.'},
                                        {'img': url_productosmasvendidos3, 'txt': txt_productosmasvendidos3, 'desc': 'Novela histórica juvenil sobre la guerra.'}
                                    ] %}
                                    
                                    {% for p in products_group1 %}
                                        {% set is_center = loop.index == 2 %}
                                        <div class="product-slide {{ 'center-card' if is_center }}">
                                            <img src="{{ p.img }}" alt="{{ p.txt }}" class="product-image">
                                            <div class="product-info">
                                                <h3>{{ p.txt }}</h3>
                                                <p>{{ p.desc }}</p>
                                                <a href="#" class="btn-detail">Ver Detalle</a>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                                
                                <div class="product-group">
                                    <div class="product-slide">
                                        <img src="{{ url_productosmasvendidos3 }}" alt="Relleno 1" class="product-image">
                                        <div class="product-info"><h3>Libro de Relleno</h3><p>Descripción extra de un libro de apoyo.</p><a href="#" class="btn-detail">Ver Detalle</a></div>
                                    </div>
                                    
                                    <div class="product-slide center-card">
                                        <img src="{{ url_productosmasvendidos4 }}" alt="{{ txt_productosmasvendidos4 }}" class="product-image">
                                        <div class="product-info">
                                            <h3>{{ txt_productosmasvendidos4 }}</h3>
                                            <p>Una crónica fascinante sobre un período crucial.</p>
                                            <a href="#" class="btn-detail">Ver Detalle</a>
                                        </div>
                                    </div>

                                    <div class="product-slide">
                                        <img src="{{ url_productosmasvendidos1 }}" alt="Relleno 2" class="product-image">
                                        <div class="product-info"><h3>Libro de Relleno</h3><p>Descripción extra de otro libro de apoyo.</p><a href="#" class="btn-detail">Ver Detalle</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>


                    <div class="wp-block-group elementor-section elementor-top-section elementor-element elementor-element-f97e68c elementor-section-full_width elementor-section-height-default elementor-section-height-default" data-element_type="section">
                        <div class="elementor-container elementor-column-gap-default">
                            <div class="elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-3144d2d" data-element_type="column">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-d1445b2 elementor-widget elementor-widget-text-editor" data-element_type="widget">
                                        <div class="elementor-widget-container">
                                            <h2>Descubre una nueva forma de aprender</h2>
                                            <p>Tu librería online te ofrece más que solo libros. Conoce nuestros recursos digitales, audiolibros, ebooks y guías especializadas para la educación del futuro.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-f8a65c2" data-element_type="column">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-d84f4f3 elementor-widget elementor-widget-image" data-element_type="widget">
                                        <div class="elementor-widget-container">
                                            <img decoding="async" src="{{ url_banner3 }}" title="Banner Lateral" alt="Banner de Ofertas Especiales" class="elementor-image">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="wp-block-group elementor-section elementor-top-section elementor-element elementor-element-a5f979c elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section">
                        <div class="elementor-container elementor-column-gap-default">
                            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-19e97f4" data-element_type="column">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-59d4c20 elementor-widget elementor-widget-image" data-element_type="widget">
                                        <div class="elementor-widget-container">
                                            <img decoding="async" src="{{ url_banner4 }}" title="Banner de Promoción de Cursos" alt="Gran Oferta" class="elementor-image">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="wp-block-group elementor-section elementor-top-section elementor-element elementor-element-b7f3295 elementor-section-full_width elementor-section-height-default elementor-section-height-default editorials-section" data-element_type="section">
                        <h2 class="section-title">Nuestras Editoriales Aliadas</h2>
                        <div class="editorials-logos">
                            <img src="{{ url_editorial1 }}" alt="Editorial 1" class="editorial-logo">
                            <img src="{{ url_editorial2 }}" alt="Editorial 2" class="editorial-logo">
                            <img src="{{ url_editorial3 }}" alt="Editorial 3" class="editorial-logo">
                            <img src="{{ url_editorial4 }}" alt="Editorial 4" class="editorial-logo">
                            <img src="{{ url_editorial5 }}" alt="Editorial 5" class="editorial-logo">
                        </div>
                    </div>

                </main>
            </div>
        </div>
    </div>
    
    <style>
        /* ------------------ ESTILOS BASE Y ESTRUCTURA (Replicados del ejemplo) ------------------ */
        .site-content { max-width: 100vw; margin: 0 auto; }
        .row { display: flex; flex-wrap: wrap; margin: 0; }
        .column { padding: 0; }

        /* Estilos Elementor/WP para replicar layout */
        .wp-container-1, .elementor-section { margin-bottom: 0; padding: 0 !important; }
        .elementor-section { width: 100%; position: relative; }
        .elementor-section-boxed > .elementor-container { max-width: 1200px; margin: 0 auto; }
        .elementor-container { display: flex; flex-wrap: wrap; width: 100%; }
        .elementor-col-100 { width: 100%; }
        .elementor-col-50 { width: 50%; }
        .elementor-column { padding: 10px; box-sizing: border-box; }
        
        .elementor-widget-text-editor { padding: 20px; }
        .elementor-widget-container h2 { color: #1a1a1a; font-size: 2em; margin-bottom: 15px; }
        .elementor-widget-container p { color: #666; font-size: 1.1em; line-height: 1.6; }
        .elementor-image { width: 100%; height: auto; display: block; }

        /* ------------------ ESTILOS CARRUSEL BANNER (Funcional) ------------------ */
        .banner-carousel-container {
            width: 100vw;
            height: 500px; /* Altura ajustada */
            overflow: hidden;
            position: relative;
            /* Truco para full width */
            left: 50%; right: 50%; margin-left: -50vw; margin-right: -50vw;
        }
        .banner-track {
            display: flex;
            height: 100%;
            transition: transform 0.5s ease-in-out; 
        }
        .banner-slide {
            width: 50%; 
            flex-shrink: 0;
        }
        .banner-image {
            width: 100%;
            height: 100%;
            object-fit: cover; 
        }
        .carousel-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.4); color: white; border: none;
            padding: 10px 15px; cursor: pointer; z-index: 10;
            font-size: 1.8em; border-radius: 5px; opacity: 0.8; transition: opacity 0.3s;
        }
        .banner-prev-btn { left: 20px; }
        .banner-next-btn { right: 20px; }

        /* ------------------ ESTILOS SECCIÓN PRODUCTOS RECOMENDADOS (Funcional) ------------------ */
        .recommended-products-section { max-width: 1200px; margin: 50px auto; padding: 0 20px; }
        .section-title { text-align: center; color: #0056b3; margin-bottom: 5px; font-size: 2.2em; font-weight: 700; }
        .section-subtitle { text-align: center; color: #666; margin-bottom: 40px; font-size: 1.1em; }

        .recommended-carousel-wrapper {
            position: relative;
            overflow: hidden;
            padding: 20px 0;
            margin: 0 5%; 
        }
        .product-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .product-group {
            min-width: 100%; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px; 
            box-sizing: border-box;
            flex-shrink: 0;
        }
        .product-slide {
            width: 25%; 
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
            padding-bottom: 15px;
            margin: 0 10px; 
        }
        .center-card {
            width: 40%; /* Tarjeta central notablemente más grande */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: scale(1.05); 
        }
        .product-slide .product-image { width: 100%; height: 220px; object-fit: cover; margin-bottom: 10px; }
        .product-info h3 { font-size: 1.2em; margin: 10px 0 5px; color: #1a1a1a; }
        .product-info p { font-size: 0.9em; color: #666; padding: 0 10px; }
        .product-info .btn-detail { margin-top: 15px; display: inline-block; padding: 8px 15px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; font-size: 0.9em; }

        .product-carousel-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: #007bff; color: white; border: none; border-radius: 50%;
            width: 40px; height: 40px; font-size: 1.5em; line-height: 40px;
            cursor: pointer; z-index: 5; opacity: 0.9; 
            display: flex; justify-content: center; align-items: center; /* Centrado perfecto */
        }
        .product-prev-btn { left: 0; }
        .product-next-btn { right: 0; }

        /* Estilos de Editorial (Mantenidos) */
        .editorials-section { margin-top: 50px; }
        .editorials-logos { display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; padding: 20px 0; gap: 30px; max-width: 1000px; margin: 0 auto; }
        .editorial-logo { max-height: 70px; width: auto; object-fit: contain; filter: grayscale(80%); opacity: 0.8; transition: filter 0.3s, opacity 0.3s; }
        .editorial-logo:hover { filter: grayscale(0%); opacity: 1; }
    </style>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // =============================================================
            // LÓGICA DEL CARRUSEL DE BANNER (INFINITO Y 5 SEGUNDOS)
            // =============================================================
            const bannerTrack = document.querySelector('.banner-track');
            const originalBannerSlides = document.querySelectorAll('.banner-slide');
            const bannerPrevBtn = document.querySelector('.banner-prev-btn');
            const bannerNextBtn = document.querySelector('.banner-next-btn');
            const slideCount = originalBannerSlides.length;
            const intervalTime = 5000; 

            // Clonar slides para el loop
            if (slideCount > 0) {
                const firstClone = originalBannerSlides[0].cloneNode(true);
                const lastClone = originalBannerSlides[slideCount - 1].cloneNode(true);
                
                bannerTrack.appendChild(firstClone);
                bannerTrack.insertBefore(lastClone, originalBannerSlides[0]);
            }
            
            const allBannerSlides = document.querySelectorAll('.banner-slide');
            const totalSlides = allBannerSlides.length;
            if (totalSlides > 0) {
                let currentBannerIndex = 1; 
                
                const bannerSlideWidth = 100 / totalSlides;
                bannerTrack.style.width = `${totalSlides * 100}%`;
                allBannerSlides.forEach(slide => {
                    slide.style.width = `${bannerSlideWidth}%`;
                });
                
                bannerTrack.style.transform = `translateX(-${bannerSlideWidth * currentBannerIndex}%)`;


                const updateBannerCarousel = (smooth = true) => {
                    bannerTrack.style.transition = smooth ? 'transform 0.5s ease-in-out' : 'none';
                    bannerTrack.style.transform = `translateX(-${bannerSlideWidth * currentBannerIndex}%)`;
                };

                bannerTrack.addEventListener('transitionend', () => {
                    if (currentBannerIndex === 0) {
                        currentBannerIndex = slideCount;
                        updateBannerCarousel(false); 
                    } else if (currentBannerIndex === totalSlides - 1) {
                        currentBannerIndex = 1;
                        updateBannerCarousel(false); 
                    }
                });

                const navigateBanner = (direction) => {
                    if (direction === 'next') {
                        if (currentBannerIndex >= totalSlides - 1) return;
                        currentBannerIndex++;
                    } else { 
                        if (currentBannerIndex <= 0) return;
                        currentBannerIndex--;
                    }
                    updateBannerCarousel();
                    resetBannerInterval();
                };

                bannerNextBtn.addEventListener('click', () => navigateBanner('next'));
                bannerPrevBtn.addEventListener('click', () => navigateBanner('prev'));

                let autoSlide = setInterval(() => {
                    navigateBanner('next');
                }, intervalTime);

                const resetBannerInterval = () => {
                    clearInterval(autoSlide);
                    autoSlide = setInterval(() => {
                        navigateBanner('next');
                    }, intervalTime);
                };
            }


            // =============================================================
            // LÓGICA DEL CARRUSEL DE PRODUCTOS (GRUPOS DE TRES) - ESTABLE
            // =============================================================
            const productTrack = document.querySelector('.product-track');
            const productGroups = document.querySelectorAll('.product-group');
            const productPrevBtn = document.querySelector('.product-prev-btn');
            const productNextBtn = document.querySelector('.product-next-btn');
            
            let currentProductGroup = 0;
            const groupCount = productGroups.length;

            if (productTrack && groupCount > 0) {
                const updateProductCarousel = () => {
                    productTrack.style.width = `${groupCount * 100}%`; 
                    productTrack.style.transform = `translateX(-${currentProductGroup * 100}%)`;
                };

                productNextBtn.addEventListener('click', () => {
                    if (currentProductGroup < groupCount - 1) {
                        currentProductGroup++;
                    } else {
                        currentProductGroup = 0; // Loop simple al inicio
                    }
                    updateProductCarousel();
                });

                productPrevBtn.addEventListener('click', () => {
                    if (currentProductGroup > 0) {
                        currentProductGroup--;
                    } else {
                        currentProductGroup = groupCount - 1; // Loop simple al final
                    }
                    updateProductCarousel();
                });
                
                updateProductCarousel(); 
            }
        });
    </script>

{% endblock %}